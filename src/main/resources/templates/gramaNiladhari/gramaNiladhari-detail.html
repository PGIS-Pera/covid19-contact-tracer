<!DOCTYPE html>
<html lang="en" >
<head data-th-replace="~{fragments/header :: headerFragment}" >
  <meta charset="UTF-8" >
  <title >Thymeleaf Springboot </title >
</head >
<body >
<nav data-th-replace="~{fragments/navBar :: navBarFragment}" ></nav >
<div class="container-fluid" >
  <div class="row text-center" >
    <div class="col" >
      <a class="btn btn-info" data-th-href="${'/home'}" >
        Back To Home
      </a >
    </div >
    <div class="col" >
      <span class="font-weight-bold h2" data-th-text="${gramaNiladhariDetail.name}" ></span >
    </div >
    <div class="col" >
      <a class="btn btn-success" data-th-href="${'/gramaNiladhari'}" >
        <i class="fa fa-list" ></i >&nbsp; Grama Niladhari List </a >
    </div >
  </div >
</div >
<div class="container-fluid text-center" >
  <div class="col-6 offset-md-3" data-th-fragment="{gramaNiladhariDetail" >
    <!--Province-->
    <div class="form-row text-center" >
      <div class="col-md-4" >
        <label class="form-label " > Province :</label >
      </div >
      <div class="col-md-8" >
        <p class="display_detail"
           data-th-text="${gramaNiladhariDetail.dsOffice.district.province.province}" ></p >
      </div >
    </div >
    <!--District-->
    <div class="form-row text-center" >
      <div class="col-md-4" >
        <label class="form-label " > District :</label >
      </div >
      <div class="col-md-8" >
        <p class="display_detail"
           data-th-text="${gramaNiladhariDetail.dsOffice.district.name}" ></p >
      </div >
    </div >
    <!--AgOffice-->
    <div class="form-row text-center" >
      <div class="col-md-4" >
        <label class="form-label " > Divisional Secretory
                                     Office :</label >
      </div >
      <div class="col-md-8" >
        <p class="display_detail"
           data-th-text="${gramaNiladhariDetail.dsOffice.name}" ></p >
      </div >
    </div >
    <!--Number-->
    <div class="form-row text-center" >
      <div class="col-md-4" >
        <label class="form-label" > Number :</label >
      </div >
      <div class="col-md-8" >
        <p class="display_detail"
           data-th-text="${gramaNiladhariDetail.number}" ></p >
      </div >
    </div >
    <!--GramaNiladhariDivision-->
    <div class="form-row text-center" >
      <div class="col-md-4" >
        <label class="control-label" >Gramaniladhari Division :</label >
      </div >
      <div class="col-md-8" >
        <p class="display_detail"
           data-th-text="${gramaNiladhariDetail.name}" ></p >
      </div >
    </div >
  </div >
  <!--summary report-->
  <div class="container-fluid" >
    <div class="row" >
      <div class="col-md-6 col-sm-12" >
        <div class="row" >
          <div class="container-fluid text-center" >
            <h3 >Summary Report</h3 >
          </div >
        </div >
        <div class="row" >
          <table class="table table-striped table-inverse table-responsive" id="summaryReport" >
            <thead class="thead-inverse" >
            <tr >
              <th >Index</th >
              <th >Status Name</th >
              <th >Record Count</th >
            </tr >
            </thead >
            <tbody >
            <tr data-th-each="attributeAndCount, index : ${attributeAndCounts}" >
              <td data-th-text="${index.count}" ></td >
              <td data-th-text="${attributeAndCount.name}" ></td >
              <td data-th-text="${attributeAndCount.count}" ></td >
            </tr >
            </tbody >
          </table >
        </div >
      </div >
      <div class="col-md-6 col-sm-12 mb-sm-5 pt-sm-5 " >
        <div class="row" >
          <div class="container-fluid text-center" >
            <h3 > Graphical Representation </h3 >
          </div >
        </div >
        <div class="row" >
          <canvas id="myChart" class="container-fluid col-sm-8" ></canvas >
        </div >
      </div >
    </div >
  </div >
  <!--Button-->
  <div class="form-group col-md-12 col-sm-12 text-center flex-column " >
    <!--Back Button-->
    <a class="btn btn-dark" data-th-href="${'/gramaNiladhari'}" tabindex="10" >
      <i class="fas fa-arrow-circle-left" style="font-size: 20px" ></i >&nbsp;&nbsp;Back
    </a >
  </div >
</div >
<!--footer include-->
<div data-th-replace="~{fragments/footer :: footerFragment}" ></div >
<!--script include-->
<div data-th-replace="~{fragments/script :: scriptFragment}" ></div >
<script >

    let STATUS = [];
    let PATIENT_COUNT = [];
    let COLORS = [];

    function showTableData() {
        let myTab = document.getElementById('summaryReport');
        for (let i = 1; i < myTab.rows.length; i++) {
            // GET THE CELLS COLLECTION OF THE CURRENT ROW.
            let objCells = myTab.rows.item(i).cells;
            STATUS.push(objCells.item(1).innerHTML);
            PATIENT_COUNT.push(parseInt(objCells.item(2).innerHTML));
            COLORS.push('#' + Math.floor(Math.random() * 16777215).toString(16));
        }
    }

    let canvas = document.getElementById("myChart");
    let ctx = canvas.getContext('2d');

    let data = {
        labels: STATUS,
        datasets: [
            {
                fill: true,
                backgroundColor: COLORS,
                data: PATIENT_COUNT,
// Notice the borderColor
                borderColor: ['black', 'black'],
                borderWidth: [2, 2]
            }
        ]
    };

    // Notice the rotation from the documentation.

    let options = {
        responsive: true,
        title: {
            display: true,
            text: 'What happens when you lend your favorite t-shirt to a girl ?',
            position: 'top'
        },
        rotation: -0.7 * Math.PI
    };


    $(document).ready(function () {
        showTableData();
        // Chart declaration:
        let myBarChart = new Chart(ctx, {
            type: 'pie',
            data: data,
            options: options
        });
    });


</script >
</body >
</html >